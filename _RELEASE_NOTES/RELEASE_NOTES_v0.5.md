# リリースノート - Version 0.5

2026/01/08

## Version 0.5

### 新機能

- **フルスクリーンモード**
  - ヘッダー・フッター・サイドバーを一括で非表示にする機能
  - 画面右下のフローティングボタン（⛶）またはキーボードショートカット `F` で切替
  - ボタンはビューポート最下部を基準に固定配置（フッターの表示/非表示に関係なく同じ位置）

- **レイアウト切替機能**
  - 訳本の表示を「縦並び」「横並び」「自動」から選択可能
  - 自動モード: 画面幅769px以上で横並び、768px以下で縦並び（レスポンシブ）
  - フォント設定メニューまたはキーボードショートカット `L` で切替

- **余白最適化機能**
  - 横並びレイアウト時、各訳本の幅を内容に応じて自動調整
  - 折り返しが発生している訳本により多くの幅を配分
  - ヘッダーの `⇔` ボタンまたはキーボードショートカット `O` で実行
  - 詩歌表示時・レイアウト変更時に自動実行

- **ショートカット情報ポップアップ**
  - ヘッダー右端の `ⓘ` ボタンでキーボードショートカット一覧を表示

### UI改善

- **歌詞スタイリングの再構成**
  - CSS を「主要言語」と「付随言語」のクラスで整理
  - 縦並び時: 付随言語はダークグレー（#555）、フォントサイズ0.95em、薄いグレーの破線区切り
  - 横並び時: 付随言語は主要言語と同じフォントサイズ・色、節番号は薄いグレー（#bbb）で表示
  - 節の左の縦線を削除

- **フォント設定メニューのコンパクト化**
  - スライダーとラベル・値を横並びに配置
  - ラベルを短縮（「節内行間」→「行間」、「フォントサイズ」→「サイズ」など）
  - グループ間のマージンを縮小

### キーボードショートカット一覧

| キー | 機能 |
|------|------|
| ← | 前の詩歌 |
| → | 次の詩歌 |
| J | 歌訳の表示/非表示 |
| Z | 全訳の表示/非表示 |
| C | 中文の表示/非表示 |
| F | フルスクリーン |
| L | レイアウト切替（自動→縦→横→自動...） |
| O | 余白最適化 |
| Esc | サイドバー開閉 |

### 技術的改善

- 余白最適化のアルゴリズムを改善
  - 訳本単位で最大行幅を測定し、必要幅の比率でflex値を配分
  - DOM更新前に `visibility: hidden` で非表示にし、最適化完了後に表示（移動が見えないように）

