# リリースノート - Version 0.11

2026/01/08

## Version 0.11

### UI改善

- **メニューの位置調整**
  - ツールボタンのメニュー（フォント設定、言語メニューなど）をボタンの左側に開くように変更
  - メニューの下部をハンバーガーボタンの下部に揃える
  - より自然な位置に配置

- **ボタン配置の調整**
  - ハンバーガーボタンとツールボタンの右と下のマージンを増加
  - より操作しやすい位置に配置

- **ツールボタンの順番変更**
  - ショートカット一覧ボタン（ⓘ）を一番上に移動
  - 順番：ショートカット一覧 → 余白最適化 → フォント設定 → 言語メニュー

### レイアウト修正

- **縦並び時の全訳の右側が切れる問題を修正**
  - インデント時の右側のはみ出しを考慮
  - `max-width`を設定して右側が切れないように修正

- **縦並び時の余白最適化ボタン**
  - グレーアウトから非表示（`display: none`）に変更
  - 縦並びでは機能しないため、視覚的にクリーンに

### 機能改善

- **縦並び時でも中文の2行を1行に結合**
  - 縦並びレイアウトでも中文の2行を1行に結合する処理が機能するように修正
  - 折り返しが発生する場合は元の2行に戻す処理も縦並びで動作

- **PWA設定の統合と改善**
  - PWA設定を訳本メニュー（地球ボタン）に統合
  - 独立していたPWA設定ボタンを削除
  - ホーム画面追加案内を改善：
    - `beforeinstallprompt`イベントを活用したカスタムインストールボタン
    - プラットフォーム別の詳細な手順案内（iOS、Android、デスクトップ）
    - インストール済みかどうかの自動検出
    - 適切なタイミングでの案内表示（初回訪問時は5秒後、閉じた場合は7日間再表示しない）
    - 閉じるボタンと「後で」ボタンを追加

### パフォーマンス改善

- **Service WorkerをNetwork First戦略に変更**
  - オンライン時は常に最新のファイルを取得
  - オフライン時のみキャッシュを使用
  - キャッシュバージョンをv4に更新
  - 新しいService Workerがインストールされたときに自動的にページをリロード
  - 60秒ごとにService Workerの更新をチェック

### フォント設定の調整

- **デフォルトフォントサイズの変更**
  - デフォルトフォントサイズを110%から100%に変更
  - 最小値を80%から70%に変更
  - より細かい調整が可能に

### キーボードショートカットの変更

- **Fキーの機能変更**
  - Fキーをフォントプリセットの切り替えからフォント設定メニューの開閉に変更
  - より直感的な操作に

### キーボードショートカット一覧（更新）

| キー | 機能 |
|------|------|
| ← | 前の詩歌 |
| → | 次の詩歌 |
| J | 歌訳の表示/非表示 |
| Z | 全訳の表示/非表示 |
| C | 中文の表示/非表示 |
| L | 言語メニューの開閉 |
| O | 余白最適化 |
| S | 検索欄に移動 |
| R | 検索結果(Result)の開閉 |
| ↑ | フォント拡大 |
| ↓ | フォント縮小 |
| F | フォント設定メニューの開閉 |
| W | フォントウェイト切替 |
| T | ツールバー表示/非表示 |
| I | 本メニューの開閉 |

